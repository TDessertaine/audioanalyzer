<!DOCTYPE html>

<!--
instructions.html

Copyright (C) 2016  Moritz Balter, Vlad Paul, Sascha Bilert
IHA @ Jade Hochschule applied licence see EOF

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.

contact: sascha.bilert@student.jade-hs.de
-->

<html lang="en">

<head>

    <!-- define metadata -->
    <meta http-equiv="content-type" content="text/html">

    <!-- set title of the website -->
    <title>Instructions</title>

    <!-- link to css style -->
    <link rel="stylesheet" href="css/master.css" type="text/css">
    <link rel="stylesheet" href="css/instructionsstyle.css" type="text/css">

    <!-- import image for tab icon -->
    <link rel="icon" type="image/png" href="image/icon.png">

    <!-- include plotly latest version to visulize Data -->
    <script type="text/javascript" src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <!-- include MathJax to user LateX for Math formular -->
    <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <script type="text/javascript" src="js/audioprocessing.js"></script>

</head>

<body>

    <header>
        <h1>Audioanalyzer</h1>
        <a href="index.html" class="link" target="_blank">Analyzer</a>
        <a href="instructions.html" class="link">Instructions</a>
        <a href="about.html" class="link" target="_blank">About</a>
    </header>

    <!-- <div id="Findus" class="Findus">Find us on: <a href="http://www.jade-hs.de" target="_blank">Homepage</a></div> -->

    <ul>
        <li><a class = "naviItems" href="#ChoosingAFile">Choosing a file</a></li>
        <li><a class = "naviItems" href="#PlayPause">Listen to the song</a></li>
        <li><a class = "naviItems" href="#Editing">Editing the spectrum</a></li>
        <li><a class = "naviItems" href="#blockLength">Blocklength</a></li>
        <li><a class = "naviItems" href="#WindowType">Window-Type</a></li>
        <li><a class = "naviItems" href="#overlap">Overlap</a></li>
        <li><a class = "naviItems" href="#DisplayType">Display-Type</a></li>
        <li><a class = "naviItems" href="#Colormap">Colormap</a></li>
    </ul>

    <h2>Instructions</h2>
    <p>If you need help to use the Website you can navigate to the preferred help-section in the menu on the left side. In general this website is an easy tool to analyse audio files. The developer used different technologies:</p>
    <ul id="technics">
        <li>JavaScript</li>
        <li>HTML</li>
        <li>CSS</li>
    </ul>
    <p style="margin-top:90px;">The functional part is based on a free FFT programmed in JavaScript by Nayuki for more Information visit <a href="https://www.nayuki.io/page/free-small-fft-in-multiple-languages" target="_blank">www.nayuki.io.</a> The main goal we adressed, was to
        create a easy and useful tool to analyse audio files in terms of magnitude and phase. The user is able to apply diffrent settings for special examinations. All the parameters are discussed in a easy way below.</p>
    <h3><a id="ChoosingAFile">Choosing a file:</a></h3>
    <img id="choose" src="image/choose2.png" class="zoomImg" alt="Choosing a File">
    <p>If you click on “Choose a file” you are able to import an audio file from you local computer. You can analyse different audio formats e.g. wav or mp3 if the are recognised by your browser <a href="https://developer.mozilla.org/en-US
       /docs/Web/HTML/Supported_media_formats" target="_blank">(Click here for more audio formats).</a> After you chose a file the waveform and the spectrum will be calculated and displayed below the buttons after the loading screen disappeared. The
        upload button now shows the name of your chosen file. By clicking the button again, you can analyse a new file. Your audio data won’t be saved at any point just analysed.</p>
    <h3><a id="PlayPause">Listen to the song:</a></h3>
    <div>
        <img src="image/play.png" class="zoomImg" alt="Play/Pause Button and Playback-Time">
        <img src="image/loop.png" class="zoomImg" alt="Loop and Gridsize">
    </div>
    <p>You can play, pause and stop your track by using the buttons above. You can also adjust the volume by using the volume slider. The second container displays the current playback time and the total length of the track. You can use the buttons to control
        and go throw the audiosignal. It is also possible to loop a selected piece of the audio file. In case of analysis you can pick a matching grid size.
    </p>
    <div>
        <img src="image/waveform.png" class="zoomImg" alt="Waveform">
        <img src="image/spectrum.png" class="zoomImg" alt="Spectrum">
    </div>
    <p>During playing you can see the progress bar in the signal in the waveform and in the spectrum. You can select with the mouse on the waveform just a part of the track, which you want to hear. By doing this, the spectrum will show you just that part.
        You can zoom in and out in the spectrum by using "Ctrl + mouse wheel" for the time axis and "Shift + mouse wheel" for the frequency axis.</p>
    <h3><a id="Editing">Editing the spectrum:</a></h3>
    <img src="image/select.png" class="zoomImg" alt="Buttons to edit the spectrum">
    <p>You can change the settings of the spectrum by choosing a block length, an overlap, a window type and a colormap. The default block length is 1024, the default window type is the hann window and the default overlap is 50%. The default type of the
        colormap is Parula, but you can choose between other 3 colormaps. For the spectrum you can choose a min and a max value for the visualization......... Depending on what you want to analyse you can choose the display type. You can visualise the
        spectrum, the phase, the modulation spectrum, the group delay and the instantaneous frequency of the signal.</p>
    <h3><a id="blockLength">Blocklength:</a></h3>
    <p>The block length is the number of bins used to divide the window into equal strips. One bit represents one spectrum sample and defines the frequency resolution of the window. For a 44100 Hz sample rate and a block size of 1024, the signal is being
        divided into 512 bins. Changing the block length affects the temporal resolution and the coefficient quality of the spectrum. If you increase the block size, you will have an improved frequency resolution, because you will have more bins in one
        window. An increase of the block size slows the calculating time proportionally. The default value implemented here is 1024. You can increase it by choosing 2048 or 4096 bins per block. </p>
    <h3><a id="WindowType">Window-Type:</a></h3>
    <p>HERE COMES AN EXPLANATION WHY THE WINDOW IS IMPORTANT FOR THE ANALYSIS</p>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]} });
    </script>

    <h4>1. Rect Window</h4>
    <p>The Rect Window is defined by: $w(n) = 1$</p>

    <div class="plot" id="divRect"></div>

    <h4>2. Hann Window</h4>
    <p>The Hann Window is defined by: $w(n) = \dfrac{1}{2}\left(1-cos\left(\dfrac{2\pi n}{N-1}\right)\right)$</p>

    <div class="plot" id="divHann"></div>

    <h4>3. Hann-Poisson Window</h4>
    <p>The Hann-Poisson Window is defined by: $w(n) = \dfrac{1}{2}\left(1-cos\left(\dfrac{2\pi n}{N-1}\right)\right)e^{{\dfrac{-\alpha\vert N-1-2n\vert}{N-1}}}$</p>

    <div class="plot" id="divHannPoisson"></div>

    <h4>4. Cosine Window</h4>
    <p>The Cosine Window is defined by: $w(n) = cos\left(\dfrac{\pi n}{N-1}-\dfrac{\pi}{2}\right)$</p>

    <div class="plot" id="divCosine"></div>

    <h4>5. Flat-Top Window</h4>
    <p>The Flat-Top Window is defined by: $w(n) = \alpha_{0}-\alpha_{1}cos\left(\dfrac{2\pi n}{N-1}\right)+ \alpha_{2}cos\left(\dfrac{4\pi n}{N-1}\right)- \alpha_{3}cos\left(\dfrac{6\pi n}{N-1}\right)+ \alpha_{4}cos\left(\dfrac{8\pi n}{N-1}\right)$</p>
    <p>$\alpha_{0} = 1$; $\alpha_{1} = 1.93$; $\alpha_{2} = 1.29$; $\alpha_{3} = 0.388$; $\alpha_{4} = 0.028$</p>

    <div class="plot" id="divFlatTop"></div>

    <h4>6. Kaiser-Bessel Window</h4>
    <p>The Rect-Window is defined by: $w(n) = \dfrac{I_{0}\left(\pi\alpha\sqrt{1-\left(\dfrac{2n}{N-1}-1\right)^{2}}\right)}{I_{0}\left(\pi\alpha\right)}$</p>

    <div class="plot" id="divKaiserBessel"></div>

    <script type="text/javascript">
        var windowLen = linspace(0, 1024, 1024);
        var windowValue = calculateWindow(windowLen, "hann");
        var data = [{
            x: windowLen,
            y: windowValue,
            type: 'bar'
        }];
        var layout = {
            xaxis: {
                title: 'samples',
                titlefont: {
                    family: 'Arial, sans-serif',
                    size: 14,
                    color: 'black'
                },
            },
            yaxis: {
                title: 'value',
                titlefont: {
                    family: 'Arial, sans-serif',
                    size: 14,
                    color: 'black'
                },
            },
        };
        Plotly.newPlot('divHann', data, layout);
    </script>

    <script type="text/javascript">
        var windowLen = linspace(0, 1024, 1024);
        var windowValue = calculateWindow(windowLen, "rect");
        windowValue.fill(0, 0, 81);
        windowValue.fill(0, 942, 1024);
        var data = [{
            x: windowLen,
            y: windowValue,
            type: 'bar'
        }];
        var layout = {
            xaxis: {
                title: 'samples',
                titlefont: {
                    family: 'Arial, sans-serif',
                    size: 14,
                    color: 'black'
                },
            },
            yaxis: {
                title: 'value',
                titlefont: {
                    family: 'Arial, sans-serif',
                    size: 14,
                    color: 'black'
                },
            },
        };
        Plotly.newPlot('divRect', data, layout);
    </script>

    <script type="text/javascript">
        var windowLen = linspace(0, 1024, 1024);
        var windowValue = calculateWindow(windowLen, "hannpoisson");
        var data = [{
            x: windowLen,
            y: windowValue,
            type: 'bar'
        }];
        var layout = {
            xaxis: {
                title: 'samples',
                titlefont: {
                    family: 'Arial, sans-serif',
                    size: 14,
                    color: 'black'
                },
            },
            yaxis: {
                title: 'value',
                titlefont: {
                    family: 'Arial, sans-serif',
                    size: 14,
                    color: 'black'
                },
            },
        };
        Plotly.newPlot('divHannPoisson', data, layout);
    </script>

    <script type="text/javascript">
        var windowLen = linspace(0, 1024, 1024);
        var windowValue = calculateWindow(windowLen, "cosine");
        var data = [{
            x: windowLen,
            y: windowValue,
            type: 'bar'
        }];
        var layout = {
            xaxis: {
                title: 'samples',
                titlefont: {
                    family: 'Arial, sans-serif',
                    size: 14,
                    color: 'black'
                },
            },
            yaxis: {
                title: 'value',
                titlefont: {
                    family: 'Arial, sans-serif',
                    size: 14,
                    color: 'black'
                },
            },
        };
        Plotly.newPlot('divCosine', data, layout);
    </script>

    <script type="text/javascript">
        var windowLen = linspace(0, 1024, 1024);
        var windowValue = calculateWindow(windowLen, "flat-top");
        var data = [{
            x: windowLen,
            y: windowValue,
            type: 'bar'
        }];
        var layout = {
            xaxis: {
                title: 'samples',
                titlefont: {
                    family: 'Arial, sans-serif',
                    size: 14,
                    color: 'black'
                },
            },
            yaxis: {
                title: 'value',
                titlefont: {
                    family: 'Arial, sans-serif',
                    size: 14,
                    color: 'black'
                },
            },
        };
        Plotly.newPlot('divFlatTop', data, layout);
    </script>

    <script type="text/javascript">
        var windowLen = linspace(0, 1024, 1024);
        var windowValue = calculateWindow(windowLen, "kaiser-bessel");
        var data = [{
            x: windowLen,
            y: windowValue,
            type: 'bar'
        }];
        var layout = {
            xaxis: {
                title: 'samples',
                titlefont: {
                    family: 'Arial, sans-serif',
                    size: 14,
                    color: 'black'
                },
            },
            yaxis: {
                title: 'value',
                titlefont: {
                    family: 'Arial, sans-serif',
                    size: 14,
                    color: 'black'
                },
            },
        };
        Plotly.newPlot('divKaiserBessel', data, layout);
    </script>

    <h3><a id="overlap">Overlap:</a></h3>
    <p>HERE COMES SOMETHING ABOUT THE OVERLAP</p>

    <h3><a id="DisplayType">Display-Type:</a></h3>
    <p>HERE COMES SOMETHING ABOUT THE display type</p>

    <h3><a id="Colormap">Colormap:</a></h3>
    <p>HERE COMES SOMETHING ABOUT THE colormap</p>

    <div id="myModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="img01">
        <div id="caption"></div>
    </div>

    <script>
        var modal = document.getElementById("myModal");
        var img = document.getElementById("choose");
        var modalImg = document.getElementById("img01");
        var captionText = document.getElementById("caption");

        img.onclick = function() {
            modal.style.display = "inline-block";
            modalImg.src = this.src;
            modalImg.style.display = "inline-block";
            captionText.innerHTML = this.alt;
        };

        var span = document.getElementsByClassName("close")[0];

        span.onclick = function() {
            modal.style.display = "none";
        };
    </script>

</body>

</html>
