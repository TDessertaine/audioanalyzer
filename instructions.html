<!DOCTYPE html>

<!--
instructions.html

Copyright (C) 2016  Moritz Balter, Vlad Paul, Sascha Bilert
IHA @ Jade Hochschule applied licence see EOF

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.

contact: sascha.bilert@student.jade-hs.de
-->

<html lang="en">

<head>

    <!-- define the meta data of the website -->
    <meta http-equiv="content-type" content="text/html" charset="UTF-8">

    <!-- set tab title of the website -->
    <title>Instructions</title>

    <!-- link to master.css and instructionssytle.css -->
    <link rel="stylesheet" href="css/master.css" type="text/css">
    <link rel="stylesheet" href="css/instructionsstyle.css" type="text/css">

    <!-- import image for tab icon -->
    <link rel="icon" type="image/png" href="image/icon.png">

    <!-- import audioprocessing.js to plot the window functions -->
    <script type="text/javascript" src="js/audioprocessing.js"></script>

    <!-- import plotly.js latest version to visulize data -->
    <script type="text/javascript" src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script type="text/javascript" src="js/plot.js"></script>

    <!-- import MathJax to user LateX for math formulars -->
    <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]} });</script>

    <!-- import rainbow.js and different highlighting languages -->
    <script type="text/javascript" src="assets/rainbow/dist/rainbow.js"></script>
    <script type="text/javascript" src="assets/rainbow/language/javascript.js"></script>
    <script type="text/javascript" src="assets/rainbow/language/generic.js"></script>
    <link rel="stylesheet" href="assets/rainbow/themes/github.css" type="text/css" media="screen">

</head>

<!-- trigger plotWindow() function to plot the different windows -->

<body onload="plotWindow()">

    <!-- import a black github ribbon and link to the repository -->
    <a href="https://github.com/saschabilert/audioanalyzer" target="_blank">
        <img class="githubribbon" src="https://camo.githubusercontent.com/a6677b08c955af8400f44c6298f40e7d19cc5b2d/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67" alt="Fork us on GitHub"
            data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png">
    </a>

    <!-- define the header and the link to ref pages -->
    <header>
        <h1>Audioanalyzer</h1>
        <a href="index.html" class="link" target="_blank">Analyzer</a>
        <a href="instructions.html" class="link">
            <li class="currentpage">Instructions</li>
        </a>
        <a href="about.html" class="link" target="_blank">About</a>
    </header>

    <!-- define the items of the navigation bar -->
    <ul class="navigation">
        <li><a class="naviItems" href="#choosingAFile">Choosing a file</a></li>
        <li><a class="naviItems" href="#controlBar">Control Bar</a></li>
        <li><a class="naviItems" href="#waveform">Waveform</a></li>
        <li><a class="naviItems" href="#spectrogram">Spectrogram</a></li>
        <li><a class="naviItems" href="#parameters">Parameters</a></li>
        <li><a class="naviItems" href="#blockLength">Blocklength</a></li>
        <li><a class="naviItems" href="#windowType">Window-Types</a></li>
        <li><a class="naviItems" href="#overlap">Overlap</a></li>
        <li><a class="naviItems" href="#displayType">Display-Types</a></li>
        <li><a class="naviItems" href="#colormap">Colormaps</a></li>
        <li><a class="naviItems" href="#saveSpectrogram">Save Spectrogram</a></li>
    </ul>

    <h2>Instructions</h2>
    <p>This Website includes usefull information about how to analyse your audio file. If you need help to use the Website you can navigate to the preferred help-section in the menu on the left side. The Website is programmed by using the following technologies:</p>
    <ul class="technics">
        <li>JavaScript (JS)</li>
        <li>Hypertext Markup Language (HTML5)</li>
        <li>Cascading Style Sheet (CSS3)</li>
    </ul>
    <p style="margin-top: 16px;">The audioprocssing is based on a free FFT programmed in JavaScript (JS) by Nayuki for more Information visit <a href="https://www.nayuki.io/page/free-small-fft-in-multiple-languages" target="_blank">www.nayuki.io</a>. The main goal we adressed, was
        to create a easy and useful tool to analyse audio files in terms of magnitude, phase and other values which are displayable and interpretable as an spectrogram. The user is able to apply diffrent settings for various examinations. We tried to
        describe all the parameters in a easy way in the instructions.</p>
    <h3><a id="choosingAFile">Choose a file:</a></h3>
    <img class="resizeImg" id="upload" src="image/upload.png">
    <p>If you click on “Choose a file” you are able to import an audio file from you local computer. You can analyse different audio formats e.g. wav or mp3 if the are recognised by your browser
        <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Supported_media_formats" target="_blank">(Click here for more audio formats)</a>. After you choose a file the waveform and the magintude-spectrum will be calculated and displayed below
        the buttons after the loading screen disappeared. The upload button now shows the name of your uploaded file. By clicking the button again, you can upload a new audio file. Your audio data won’t be saved at any point just analysed.</p>
    <h3><a id="controlBar">Control Bar:</a></h3>
    <img class="resizeImg" src="image/controlbar.png">
    <p>You can play, pause and stop your uploaded track by using the different buttons in the control bar. Here you also find the button "Choose a file" which was discribed in the section before. You can also adjust the volume by using the volume slider
        next to the stop button. The numbers display the current playback time and the total length of the track in MM:SS:m seperated by a slash. You can use the pause and play button to control the playback signal while you analyse it. It is also possible
        to loop a selected part of the audio file by ticking the box next to "Loop". How to select a part of your audio file is explained in the Waveform section. In case of analysis you can pick a matching grid size for the waveform including small,
        medium and large.</p>
    <h3><a id="waveform">Waveform:</a></h3>
    <img class="resizeImg" src="image/waveform.png">
    <p>The Waveform is compound by the linear amplitude (blue) and the RMS (lightblue). The RMS is calculated by $rms = \sqrt{\dfrac{1}{N}\sum \limits_{i=0}^{N} n_{i}^{2}}$. On the x-axis you have the time scale and on the y-axis you have .... In the upper
        left corner you can see a legend showing your current mouse position when you move over the waveform. The legend includes the time, amplitude and the RMS. When you hit play after uploading a audio file, a red line shows the current time point
        in the waveform. If you click into the waveform and drag your mouse backward or forward you can select a single part of the waveform. When you release the mouse button your selection is shaded in transparent red. If you now hit the play button
        you just play the selected part. It is also possible to use the Loop to repeat the selected audio part.</p>
    <h3><a id="spectrogram">Spectrogram:</a></h3>
    <img class="resizeImg" src="image/spectrum.png">
    <p>The Spectrogram You can zoom in and out in the spectrum by using "Ctrl + mouse wheel" for the time axis and "Shift + mouse wheel" for the frequency axis.</p>
    <h3><a id="parameters">Parameters:</a></h3>
    <img class="resizeImg" src="image/parameters.png">
    <p>You can change the settings of the spectrum by choosing a block length, an overlap, a window type and a colormap. The default block length is 1024, the default window type is the hann window and the default overlap is 50%. The default type of the
        colormap is Parula, but you can choose between other 3 colormaps. For the spectrum you can choose a min and a max value for the visualization......... Depending on what you want to analyse you can choose the display type. You can visualise the
        spectrum, the phase, the modulation spectrum, the group delay and the instantaneous frequency of the signal.</p>
    <h3><a id="blockLength">Blocklength:</a></h3>
    <p>The block length is the number of bins used to divide the window into equal strips. One bit represents one spectrum sample and defines the frequency resolution of the window. For a 44100 Hz sample rate and a block size of 1024, the signal is being
        divided into 512 bins. Changing the block length affects the temporal resolution and the coefficient quality of the spectrum. If you increase the block size, you will have an improved frequency resolution, because you will have more bins in one
        window. An increase of the block size slows the calculating time proportionally. The default value implemented here is 1024. You can increase it by choosing 2048 or 4096 bins per block. </p>
    <h3><a id="windowType">Window-Types:</a></h3>
    <p>HERE COMES AN EXPLANATION WHY THE WINDOW IS IMPORTANT FOR THE ANALYSIS</p>
    <h4>1. Rect Window</h4>
    <p class="windowDef">The Rect Window is defined by: $w(n) = 1$</p>
    <div class="plot" id="divRect"></div>
    <pre class="code"><code data-language="javascript">/*
 * This code shows the implementation of an rect window in Javascript
 */

 var windowLen = linspace(0, 1024, 1024);
 var windowValueRect = calculateWindow(windowLen);

 function calculateWindow(windowLen) {
       var window = new Array(windowLen.length);
       window.fill(1);
       return window;
 }</code></pre>
    <h4>2. Hann Window</h4>
    <p class="windowDef">The Hann Window is defined by: $w(n) = \dfrac{1}{2}\left(1-\cos\left(\dfrac{2\pi n}{N-1}\right)\right)$</p>
    <div class="plot" id="divHann"></div>
    <pre class="code"><code data-language="javascript">/*
 * This code shows the implementation of an hann window in Javascript
 */

 var windowLen = linspace(0, 1024, 1024);
 var windowValueHann = calculateWindow(windowLen);

 function calculateWindow(windowLen) {
       var window = new Array(windowLen.length);
       for (i = 0; i < windowLen.length; i++) {
           window[i] = 0.5 * (1 - Math.cos(2 * Math.PI *
                        windowLen[i] / (windowLen.length - 1)));
       }
       return window;
 }</code></pre>
    <h4>3. Hann-Poisson Window</h4>
    <p class="windowDef">The Hann-Poisson Window is defined by: $w(n) = \dfrac{1}{2}\left(1-\cos\left(\dfrac{2\pi n}{N-1}\right)\right)\text{e}^{{\dfrac{-\alpha\vert N-1-2n\vert}{N-1}}}$</p>
    <div class="plot" id="divHannPoisson"></div>
    <pre class="code"><code data-language="javascript">/*
 * This code shows the implementation of an hann-poisson window in Javascript
 */

 var windowLen = linspace(0, 1024, 1024);
 var windowValueHannPoisson = calculateWindow(windowLen);

 function calculateWindow(windowLen) {
       var window = new Array(windowLen.length);

       // alpha is a parameter that controls the slope of the exponential
       // (Wiki: https://en.wikipedia.org/wiki/Window_function)
       var alpha = 2;

       for (i = 0; i < windowLen.length; i++) {
           window[i] = 0.5 * (1 - Math.cos(2 * Math.PI * windowLen[i] / (windowLen.length - 1))) *
                        Math.exp((-alpha * Math.abs(windowLen.length - 1 - (2 * windowLen[i]))) /
                        (windowLen.length - 1));
       }
       return window;
 }</code></pre>
    <h4>4. Cosine Window</h4>
    <p class="windowDef">The Cosine Window is defined by: $w(n) = \cos\left(\dfrac{\pi n}{N-1}-\dfrac{\pi}{2}\right)$</p>
    <div class="plot" id="divCosine"></div>
    <pre class="code"><code data-language="javascript">/*
 * This shows the implementation of an cosine window in Javascript
 */

 var windowLen = linspace(0, 1024, 1024);
 var windowValueCosine = calculateWindow(windowLen);

 function calculateWindow(windowLen) {
       var window = new Array(windowLen.length);
       for (i = 0; i < windowLen.length; i++) {
           window[i] = Math.cos(((Math.PI * windowLen[i]) /
                        (windowLen.length)) - (Math.PI / 2));
       }
       return window;
 }</code></pre>
    <h4>5. Flat-Top Window</h4>
    <p class="windowDef">The Flat-Top Window is defined by:</p>
    <p class="windowDef">$w(n) = \alpha_{0}-\alpha_{1}\cos\left(\dfrac{2\pi n}{N-1}\right)+ \alpha_{2}\cos\left(\dfrac{4\pi n}{N-1}\right)- \alpha_{3}\cos\left(\dfrac{6\pi n}{N-1}\right)+ \alpha_{4}\cos\left(\dfrac{8\pi n}{N-1}\right)$</p>
    <p class="windowDef">$\alpha_{0} = 1$; $\alpha_{1} = 1.93$; $\alpha_{2} = 1.29$; $\alpha_{3} = 0.388$; $\alpha_{4} = 0.028$</p>
    <div class="plot" id="divFlatTop"></div>
    <pre class="code"><code data-language="javascript">/*
 * This code shows the implementation of an flat-top window in Javascript
 */

 var windowLen = linspace(0, 1024, 1024);
 var windowValueFlatTop = calculateWindow(windowLen);

 function calculateWindow(windowLen) {
       var window = new Array(windowLen.length);

       // alpha is a parameter that controls the slope of the window
       // (Wiki: https://en.wikipedia.org/wiki/Window_function)
       var alpha = [1, 1.93, 1.29, 0.388, 0.028];

       for (i = 0; i < windowLen.length; i++) {
           window[i] = alpha[0] - alpha[1] * Math.cos(2 * Math.PI * windowLen[i] / (windowLen.length - 1))
                        + alpha[2] * Math.cos(4 * Math.PI * windowLen[i] / (windowLen.length - 1))
                        - alpha[3] * Math.cos(6 * Math.PI * windowLen[i] / (windowLen.length - 1))
                        + alpha[4] * Math.cos(8 * Math.PI * windowLen[i] / (windowLen.length - 1));
       }
       return window;
 }</code></pre>
    <h4>6. Hamming Window</h4>
    <p class="windowDef">The Hamming Window is defined by: $w(n) = \alpha - \beta \cos\left(\dfrac{2\pi n}{N-1}\right)$</p>
    <p class="windowDef">$\alpha = 0.54$; $\beta = 1 - \alpha = 0.46$</p>
    <div class="plot" id="divHamming"></div>
    <pre class="code"><code data-language="javascript">/*
 * This shows the implementation of an hamming window in Javascript
 */

 var windowLen = linspace(0, 1024, 1024);
 var windowValueHamming = calculateWindow(windowLen);

 function calculateWindow(windowLen) {
      var window = new Array(windowLen.length);

      // alpha and beta are parameters that control the slope of the window
      // (Wiki: https://en.wikipedia.org/wiki/Window_function)
      var alpha = 0.54;
      var beta = 1 - alpha;

      for (i = 0; i < windowLen.length; i++) {
          window[i] = alpha - beta * Math.cos((2 * Math.PI * windowLen[i]) / (windowLen.length - 1));
      }
      return window;
 }</code></pre>
    <h4>6. Blackman Window</h4>
    <p class="windowDef">The Blackman Window is defined by: $w(n) = \alpha_{0} - \alpha_{1} \cos\left(\dfrac{2\pi n}{N-1}\right) + \alpha_{2} \cos\left(\dfrac{4\pi n}{N-1}\right)$</p>
    <p class="windowDef">$\alpha_{0} = \dfrac{1 - \alpha}{2}$; $\alpha_{1} = \dfrac{1}{2}$; $\alpha_{2} = \dfrac{\alpha}{2}$; $\alpha = 0.16$</p>
    <div class="plot" id="divBlackman"></div>
    <pre class="code"><code data-language="javascript">/*
 * This shows the implementation of an blackman window in Javascript
 */

 var windowLen = linspace(0, 1024, 1024);
 var windowValueBlackman = calculateWindow(windowLen);

 function calculateWindow(windowLen) {
      var window = new Array(windowLen.length);

      // alpha is a parameter that controls the slope of the window
      // (Wiki: https://en.wikipedia.org/wiki/Window_function)
      var alpha = 0.16;
      var alpha0 = (1 - alpha) / 2;
      var alpha1 = 1 / 2;
      var alpha2 = alpha / 2;

      for (i = 0; i < windowLen.length; i++) {
          window[i] = alpha0 - alpha1 * Math.cos((2 * Math.PI * windowLen[i]) / (windowLen.length - 1)) +
                        alpha2 * Math.cos((4 * Math.PI * windowLen[i]) / (windowLen.length - 1));
      }
      return window;
 }</code></pre>
    <h3><a id="overlap">Overlap:</a></h3>
    <p>HERE COMES SOMETHING ABOUT THE OVERLAP</p>
    <h3><a id="displayType">Display-Types:</a></h3>
    <p>HERE COMES SOMETHING ABOUT THE display type</p>
    <h3><a id="colormap">Colormaps:</a></h3>
    <p>HERE COMES SOMETHING ABOUT THE colormap</p>
    <h3><a id="saveSpectrogram">Save Spectrogram:</a></h3>
</body>

</html>
